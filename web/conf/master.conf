server {
    listen 443;

    # 注意名称
    server_name blog.duanyong.me;

    index       index.html;
    root        /var/www/blog.duanyong.me;
    error_log   /var/log/nginx/blog_duanyong_me_error.log;
    access_log  /var/log/nginx/blog_duanyong_me_access.log;

    ssl                         on;
    ssl_certificate             /var/www/blog.duanyong.me/dev/ssl/blog.duanyong.me.crt;
    ssl_certificate_key         /var/www/blog.duanyong.me/dev/ssl/blog.duanyong.me.key;
    ssl_session_timeout         5m;
    ssl_protocols               TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers                 ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers   on;



    location    = /robots.txt  { access_log off; log_not_found off; }
    location    = /favicon.ico { access_log off; log_not_found off; }

    error_page 404                  /404.html;
    error_page 403                  /404.html;
    error_page 413                  /413.html;
    error_page 500 502 503 504      /50x.html;


    ssi                 on;
    ssi_silent_errors   off;

    gzip                            on;
    gzip_vary                       on;
    gzip_min_length                 1k;
    gzip_types                      text/plain application/x-javascript text/css application/xml;
    gzip_static                     on;
    gzip_disable                    "MSIE [1-6]\.";
    gzip_buffers                    4 16k;
    gzip_comp_level                 2;
    gzip_http_version               1.0;

    sendfile                        on;
    tcp_nopush                      on;
    keepalive_timeout               60;
    client_max_body_size            2m;
    client_header_buffer_size       32k;
    large_client_header_buffers 4   32k;
    client_body_temp_path           /tmp/client_body 1 2;



    #禁止访问dev目录或以dev开关的任何文件
    location ~ ^/dev {
        deny all;
    }


    location ~* \.(?:ico|css|js|gif|jpe?g|png)$ {
        # Some basic cache-control for static files to be sent to the browser
        expires     max;
	    access_log  off;
        add_header  Pragma public;
        add_header  Cache-Control "public, must-revalidate, proxy-revalidate";

        break;
    }


    location ~* \.(?:html)$ {
        # Some basic cache-control for static files to be sent to the browser
        expires     max;
        add_header  Pragma public;
        add_header  Cache-Control "public, must-revalidate, proxy-revalidate";

        break;
    }
}
